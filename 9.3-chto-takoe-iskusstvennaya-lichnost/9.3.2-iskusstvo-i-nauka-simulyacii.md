# 9.3.2 Искусство и наука симуляции

Что такое симуляция? Симулятор - это компьютерная модель физического мира. Вы, вероятно, знакомы с авиасимуляторами, которые обеспечивают ощущения и взаимодействия от полета без отрыва от земли. Есть также много других типов симуляций и симуляторов. У нас может быть медицинский симулятор, который имитирует болезни или реагирует на лечения. Это может быть финансовая симуляция, которая моделирует доходность на фондовом рынке на основе трендов. Существуют структурные симуляции, которые моделируют нагрузки на мосты и здания для того, чтобы проверить соответствуют ли составные материалы требованиям.

Наиболее распространенный способ создания симуляции - это построение физической модели тестируемого предмета. Для авиасимулятора это означает подстановку формул для четырех сил на самолет или вертолет – подъемная сила, сила тяжести, тяга и лобовое сопротивление. Каждый фактор имеет параметры, которые влияют на летные качества - например, подъемная сила зависит от скорости движения воздуха, веса самолета, размера крыла и угла атаки, или угла между крылом и ветром. Измените любой из них, и подъемная сила изменится. Если величина подъемной силы превышает силу, вызванную гравитацией \(то есть вес самолета\), то самолет летит. Симуляция устанавливает временной шаг, так же как наш контур управления для робота, и вычисляет силы, действующие на самолет, для каждого временного шага. Затем мы можем применить элементы управления и посмотреть, как работает наша модель. Подобные модели используются для прогнозирования летных качеств до создания прототипа или для тестирования самолета.

Другой тип моделирования называется моделью Монте-Карло. Метод Монте-Карло использует теорию вероятностей, чтобы заменить сложные физические модели варьированием случайных чисел, которое приближенно даёт тот же результат. Если бы вы хотели создать компьютерную модель подбрасывания монеты, вы бы не стали тратить кучу времени на определение физических свойств никеля, или моделирование количества поворотов монеты в воздухе на основе силы. Вы бы просто выбрали случайное число от 1 до 100, и сказали, что результат - орел, если выбранное число меньше 50, и решка, если оно больше 50. По сути, это и есть метод Монте-Карло. Есть огромное количество физических процессов, которые можно приближенно вычислить и изучать с помощью этой техники.

Мы можем применить анализ Монте-Карло для моделирования людей, проходящих через пункт охраны в аэропорту. Если бы у вас была копия типичного расписания для авиакомпаний и вам было дано среднее количество пассажиров за рейс, то вы бы знали ежедневный трафик в аэропорту. Трудным было бы моделирование того, когда люди прибудут на свой рейс. Давайте представим, что мы заказали исследование, и приблизительно определили, что 50% людей прибывают на 1 час раньше своего рейса, 25% прибывают на 2 часа раньше, а остальные равномерно распределены между 2,5 часами и 30 минутами, при этом один пассажир из 200 всегда пропускает свой рейс из-за опоздания. Эта информация позволяет нам создавать размеры выборки прибытия пассажиров и, таким образом, приблизительно подсчитывать длину очереди на пункт безопасности.

![](../.gitbook/assets/image%20%281%29.png)

Нам бы осталось добавить какое-либо распределение значений того, сколько времени занял проход через пункт безопасности, и у нас была бы наша модель. У нас есть список рейсов, и для каждого рейса мы задаем распределение времени прибытия пассажиров, полученное на основе исследования, путем присвоение каждому пассажиру случайного числа и разбивая их на группы по времени прибытия. Давайте назначим случайные номера от 1 до 100 нашим 212 пассажирам, прибывающим на рейс в 08:00 из Далласа в Вашингтон. Теперь мы назначаем время прибытия на основе этого числа – если номер от 1 до 25, то пассажир прибывает на два часа раньше рейса \(06:00\). Если номер от 26 до 75 \(следующие 50%\), тогда он прибывает на один час раньше \(07:00\). Остальной части пассажиров с номерами от 76 до 100 назначается случайное время между 2,5 часами и 30 минутами. И далее мы выбираем одного несчастного пассажира из наших 200, который совсем пропустил рейс, прибыв поздно. Поскольку существует некоторая переменность в случае людей, которые собираются прибыть ровно на два часа раньше, но чуть задерживаются или ускоряются, мы можем добавить **dithering** или небольшой случайный коэффициент к каждому времени прибытия - плюс или минус 10 минут. Теперь у нас есть статистически правильное распределение людей, прибывающих на рейс. Теперь повторите этот процесс для других 1849 рейсов, вылетающих сегодня из этого аэропорта.

Из этой модели видно, что мы можем добавить немало научности в выбор случайных чисел.

Как вы могли догадаться из моего примера, истинный секрет работы этой техники – это подбор правильного распределения случайных чисел. Вы можете подумать – _«Эй, случайные числа это случайные числа, разве нет?»_, но это совсем не так. Вы слышали о стандартном распределение или колоколообразной кривой. Большинство значений находятся в центре, и значений все меньше и меньше с уходом дальше от него. Многие естественные процессы подчиняются этой колоколообразной кривой, в том числе оценки на тесте, значения роста людей или сколько виноградинок растет в одной грозди. Когда вы делаете анализ Монте-Карло, чаще всего мы используем какую-то разновидность нормального или стандартного распределения.

Можете ли вы вспомнить другие типы случайных чисел? Второй самый распространенный тип случайных чисел - это равномерное распределение. Каждое число имеет одинаковую вероятность быть выбранным, что делает кривую распределения плоской. Другое название этого равномерного распределения - белый шум. Равномерные распределения имеют место во время анализа, и, если бы мы хотели добавить шум, например, к изображению, мы бы использовали равномерное распределение. Но в моделировании эмоций и людей нормальные или стандартные распределения являются главенствующей нормой.

Возможно, вы слышали о розовом шуме - это распределение, при котором вероятность уменьшается с увеличением значения числа. Или, говоря иначе, вероятность равна единице, поделенной на значение.

Вы можете обнаружить при использовании моделирования Монте-Карло, что стандартное или нормальное распределение просто-напросто не будет работать. Затем вы можете задать собственное распределение, как я сделал в примере с аэропортом, где мы использовали ресамплинг или повторную выборку, чтобы изменить равномерное распределение на наше собственное, соответствующее нашей модели прибытия пассажиров:

![](../.gitbook/assets/image%20%282%29.png)

Мы собираемся делать симуляцию личности для нашего робота, и мы будем использовать моделирование Монте-Карло наряду с конечным автоматом.

